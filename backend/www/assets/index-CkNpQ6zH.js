import{i as f,r as l,ae as Y,j as n,F as h,l as k,I as v,aA as w,B as M,n as I,o as g,T as c,b as P,m as j}from"./index-XD4JDM6b.js";import R from"./index-n8TiZ9Qh.js";import{P as E}from"./Payment-Xt6o7eCM.js";import{T as i}from"./Table-UH30mYPz.js";import"./index--frXZXQx.js";import"./index-ehUL30Ed.js";import"./index-gcWtjv3K.js";import"./dropdown-D6H3nMuz.js";import"./MoreOutlined-kX5gnkaD.js";import"./index-Rc3KqxQe.js";const y={transaction:"/admin/transaction"},T={getTransaction:_=>f.get(y.transaction+"?"+_),updateTransaction:({_id:_,...d})=>f.post(y.transaction+"/"+_,d)},W="_inline_1bcxg_78",A="_box__shadow_1bcxg_139",N="_searchForm_1bcxg_150",z="_header_1bcxg_165",H="_inpSearch_1bcxg_172",L="_tableWrapper_1bcxg_176",B="_pagination_1bcxg_189",G="_contentWrapper_1bcxg_195",u={"ant-table-scroll-horizontal":"_ant-table-scroll-horizontal_1bcxg_1","ant-table-container":"_ant-table-container_1bcxg_1","ant-table-content":"_ant-table-content_1bcxg_1","ant-layout-sider-trigger":"_ant-layout-sider-trigger_1bcxg_24","ant-layout-footer":"_ant-layout-footer_1bcxg_29","ant-form-item-control-input-content":"_ant-form-item-control-input-content_1bcxg_33","ant-picker":"_ant-picker_1bcxg_48","ant-select-selector":"_ant-select-selector_1bcxg_49","ant-form-item":"_ant-form-item_1bcxg_33","ant-row":"_ant-row_1bcxg_62","site-layout-background":"_site-layout-background_1bcxg_66","spin-suspense":"_spin-suspense_1bcxg_70",inline:W,"cc-scroll":"_cc-scroll_1bcxg_90","cc-card":"_cc-card_1bcxg_114",box__shadow:A,"ant-tabs-content-holder":"_ant-tabs-content-holder_1bcxg_143","ant-tabs-content":"_ant-tabs-content_1bcxg_143",searchForm:N,header:z,inpSearch:H,tableWrapper:L,pagination:B,contentWrapper:G},O=l.lazy(()=>Y(()=>import("./index-1g5ndUJE.js"),__vite__mapDeps([0,1,2,3])));function tn(){const[_,d]=l.useState(!1),b=l.useRef([]),p=l.useRef();l.useEffect(()=>{x()},[]);const x=async(e={})=>{try{d(!0);const t=new URLSearchParams(e).toString(),a=await T.getTransaction(t),{data:s}=a.data;b.current=s}catch{}finally{d(!1)}},C=(e,t,a)=>{var s,r,o,m;if((s=t==null?void 0:t.data)!=null&&s.create_company)return n.jsx(n.Fragment,{children:n.jsx(c,{color:"#108ee9",children:"Thành lập doanh nghiệp"})});if((r=t==null?void 0:t.data)!=null&&r.change_info)return n.jsx(n.Fragment,{children:n.jsx(c,{color:"#108ee9",children:"Thay đổi thông tin"})});if((o=t==null?void 0:t.data)!=null&&o.pending)return n.jsx(n.Fragment,{children:n.jsx(c,{color:"#108ee9",children:"Tạm hoãn"})});if((m=t==null?void 0:t.data)!=null&&m.dissolution)return n.jsx(n.Fragment,{children:n.jsx(c,{color:"#108ee9",children:"Giải thể"})})},D=e=>{const{paymentCode:t,date:a}=e,s={};if(t&&(s.paymentCode=t),a){const[r,o]=a;s.dateFrom=g(r).format("YYYY/MM/DD"),s.dateTo=g(o).format("YYYY/MM/DD")}x(s)},F=e=>{p.current.openModal(),p.current.onSetData(e)},S=async e=>{var t,a,s,r;try{const o=await T.updateTransaction(e);j.success("Cập nhật thành công"),(t=p.current)==null||t.closeModal(),x()}catch(o){const m=((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||((r=o.repsonse)==null?void 0:r.message)||(o==null?void 0:o.message)||"Đã có lỗi xảy ra, vui lòng liên hệ admin";j.error(m)}};return n.jsxs(n.Fragment,{children:[n.jsx(R,{title:"Quản lý Hóa đơn"}),n.jsxs("div",{className:u.contentWrapper,children:[n.jsx(h,{onFinish:D,children:n.jsxs(k,{children:[n.jsx(h.Item,{name:"paymentCode",children:n.jsx(v,{placeholder:"Mã hóa đơn"})}),n.jsx(h.Item,{name:"date",children:n.jsx(w.RangePicker,{placeholder:["Từ ngày ...","...Đến ngày"]})}),n.jsx(h.Item,{children:n.jsx(M,{type:"primary",htmlType:"submit",children:"Tìm kiếm"})})]})}),n.jsxs("div",{className:u.tableWrapper,children:[n.jsxs(i,{size:"small",bordered:!0,dataSource:b.current,loading:{spinning:_,tip:"Loading...",delay:100},scroll:{x:1100,y:50*10},rowKey:e=>e._id,pagination:!1,onRow:e=>({onDoubleClick:()=>F(e)}),children:[n.jsx(i.Column,{align:"center",title:"Mã đơn",dataIndex:"paymentCode",fixed:"left"}),n.jsx(i.Column,{align:"left",title:"Dịch vụ",dataIndex:"",render:C,width:250}),n.jsx(i.Column,{align:"center",title:"Giá tiền",dataIndex:"price",render:(e,t,a)=>n.jsxs("span",{style:{display:"block",width:"150px"},children:[I(t==null?void 0:t.price)," VND"]})}),n.jsx(i.Column,{align:"center",title:"Ngày tạo",render:(e,t,a)=>n.jsx("span",{style:{display:"block",width:"150px"},children:g(t.createdAt).format("DD/MM/YYYY HH:mm")})}),n.jsx(i.Column,{align:"center",title:"Cổng thanh toán",dataIndex:"paymentType",render:(e,t,a)=>E[e]}),n.jsx(i.Column,{align:"center",title:"Thanh toán",dataIndex:"isPayment",render:(e,t,a)=>e?n.jsx(c,{color:"green",children:"Đã thanh toán"}):n.jsx(c,{color:"volcano",children:"Chưa thanh toán"})})]}),n.jsx(l.Suspense,{fallback:n.jsx(P,{}),children:n.jsx(O,{ref:p,onFinishScreen:S})})]}),n.jsx("div",{className:u.pagination})]})]})}export{tn as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-1g5ndUJE.js","assets/index-XD4JDM6b.js","assets/index-vhdyNjOD.css","assets/Payment-Xt6o7eCM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}