import{r as d,F as p,bp as F,j as e,bU as h,a2 as L,bR as g,bT as y,ak as W,o as x,c as U,R as J,C as R,B as E,bY as K,h as C}from"./index-XD4JDM6b.js";import{C as m}from"./index-gQ4A6Ldr.js";import{S as I}from"./Common-NVt6K1ML.js";import{C as w,a as D,b as P,c as M,d as Y}from"./index-7vcF2zEs.js";import{M as Q}from"./MinusCircleOutlined-OyZX2Wh6.js";const X="_hide_r1cav_1",Z="_visible_r1cav_10",ee="_groupInput_r1cav_19",ne="_newLine_r1cav_27",te="_label_r1cav_31",re="_title_r1cav_37",j={hide:X,visible:Z,groupInput:ee,newLine:ne,label:te,title:re},ie=d.forwardRef((t,a)=>{const{BASE_FORM:n,type:u}=t,c=p.useFormInstance(),l=p.useWatch([...n,"doc_type"],c);return F(),d.useEffect(()=>{const o=a.current;window.form=o},[]),e.jsxs("div",{className:j.groupInput,children:[e.jsx(h.Select,{options:I.PRESENT_CASE,name:[...n,"present_case"],label:"Trường hợp đại diện"}),u&&u!==1&&e.jsx(p.Item,{name:[...n,"capital"],label:"Số tiền góp vốn",placeholder:"Số tiền góp vốn",required:!0,children:e.jsx(L,{formatter:o=>`${o}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),min:0,style:{width:"100%"}})}),e.jsx(h,{label:"Tên tổ chức",name:[...n,"organization","name"],placeholder:"CÔNG TY TNHH DỊCH VỤ TƯ VẤN WARREN B",onChange:o=>g([...n,"organization","name"],o.target.value,a,!0),required:!0}),e.jsx(h,{label:"Mã số DN hoặc Mã số thuế",name:[...n,"organization","mst"],placeholder:"0316184427",required:!0}),e.jsx(h,{type:"date",name:[...n,"organization","doc_time_provide"],label:y("Ngày cấp <i>(ngày đăng ký lần đầu)</i>"),placeholder:"15/01/1966 - ENTER",inputReadOnly:!1,required:!0,message:"Ngày cấp (ngày đăng ký lần đầu) là bắt buộc!"}),e.jsx(p.Item,{label:y("<b>Địa chỉ trụ sở chính</b>"),className:j.newLine,children:e.jsx(m.SelectProvince,{name:[...n,"organization","doc_place_provide"],required:!0})}),e.jsx(h,{name:[...n,"name"],label:e.jsx("div",{dangerouslySetInnerHTML:{__html:"</>Họ và Tên đại diện pháp luật <i>(ĐDPL)</i></>"}}),placeholder:"NGUYỄN VĂN A",onChange:o=>g([...n,"name"],o.target.value,a,!0),required:!0,message:"Họ và Tên đại diện pháp luật (ĐDPL) là bắt buộc!"}),e.jsx(m.SelectTitle,{name:[...n,"title"],label:y("Chức danh <i>(ĐDPL)</i>"),placeholder:"Bấm vào đây",options:I.TITLE_2,required:!0,message:"Chức danh (ĐDPL) là bắt buộc!"}),e.jsx(w,{name:[...n,"birth_day"],inputReadOnly:!1,required:!0}),e.jsx(h,{type:"select",name:[...n,"gender"],label:"Giới tính",options:I.GENDER,placeholder:"Bấm vào đây",required:!0}),e.jsx(m.SelectPersonType,{name:[...n,"per_type"],label:"Dân tộc 2",placeholder:"Bấm vào đây",required:!0}),e.jsx(D,{name:[...n,"doc_type"],required:!0}),e.jsx(P,{indentifyType:l,name:[...n,"doc_code"],required:!0}),e.jsx(M,{name:[...n,"doc_time_provide"],required:!0,inputReadOnly:!1,indentifyType:l}),e.jsx(Y,{name:[...n,"doc_place_provide"],required:!0,indentifyType:l}),e.jsx(p.Item,{className:j.newLine,label:y("<b>Địa chỉ thường trú <i>(ĐDPL)</i></b>"),children:e.jsx(m.SelectProvince,{name:[...n,"current"],required:!0})}),e.jsx(m.RadioAddress,{prevField:[...n,"current"],nextField:[...n,"contact"],bodyStyle:j,required:!0})]})}),se="_hide_r1cav_1",le="_visible_r1cav_10",ce="_groupInput_r1cav_19",oe="_newLine_r1cav_27",pe="_label_r1cav_31",ae="_title_r1cav_37",T={hide:se,visible:le,groupInput:ce,newLine:oe,label:pe,title:ae},ue=d.forwardRef((t,a)=>{const{BASE_FORM:n,type:u}=t,c=p.useFormInstance(),l=p.useWatch([...n,"doc_type"],c);return e.jsxs("div",{className:T.groupInput,children:[u&&u!==1&&e.jsx(p.Item,{name:[...n,"capital"],label:"Số tiền góp vốn",placeholder:"Số tiền góp vốn",children:e.jsx(L,{formatter:o=>`${o}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),min:0,style:{width:"100%"}})}),e.jsx(h,{name:[...n,"name"],label:"Họ và Tên",placeholder:"NGUYỄN VĂN A",onChange:o=>g([...n,"name"],o.target.value,a,!0),required:!0}),e.jsx(w,{name:[...n,"birth_day"],required:!0}),e.jsx(h,{type:"select",name:[...n,"gender"],label:"Giới tính",options:I.GENDER,placeholder:"Bấm vào đây",required:!0}),e.jsx(m.SelectPersonType,{name:[...n,"per_type"],label:"Dân tộc",placeholder:"Bấm vào đây",required:!0}),e.jsx(D,{name:[...n,"doc_type"],required:!0}),e.jsx(P,{indentifyType:l,name:[...n,"doc_code"],required:!0}),e.jsx(M,{name:[...n,"doc_time_provide"],required:!0,inputReadOnly:!1,indentifyType:l}),e.jsx(Y,{name:[...n,"doc_place_provide"],required:!0,indentifyType:l}),e.jsx(p.Item,{label:y("<b>Địa chỉ thường trú</b>"),className:T.newLine,children:e.jsx(m.SelectProvince,{name:[...n,"current"],required:!0})}),e.jsx(m.RadioAddress,{label:"<b>Địa chỉ liên lạc</b>",prevField:[...n,"current"],nextField:[...n,"contact"],bodyStyle:T,required:!0})]})}),de="_hide_r1cav_1",_e="_visible_r1cav_10",he="_groupInput_r1cav_19",me="_newLine_r1cav_27",ve="_label_r1cav_31",ye="_title_r1cav_37",f={hide:de,visible:_e,groupInput:he,newLine:me,label:ve,title:ye},Se=d.forwardRef(({data:t,...a},n)=>{const{currentStep:u}=W(),[c,l]=d.useState([{}]),[o,$]=d.useState(!1),S=F(),B=p.useFormInstance(),{BASE_FORM:_}=a;d.useEffect(()=>{let i=[...c];(t==null?void 0:t.type)==2&&i.length<2?(i.push({}),l(i)):(t==null?void 0:t.type)===3&&i.length<3&&(i.push({},{}),l(i))},[]),d.useEffect(()=>{if(t!=null&&t.type)switch(t==null?void 0:t.type){case 2:l([{},{}]);break;case 3:l([{},{},{}]);break;default:l([{}]);break}},[t]),d.useEffect(()=>{S.state&&setTimeout(()=>{var v,b;const s=(b=(v=S.state.data.create_company)==null?void 0:v.approve)==null?void 0:b.origin_person;l(s),s.length&&s.map((r,H)=>{var N,q;B.setFields([{name:[..._,"origin_person",H],value:{...r,doc_outdate:r!=null&&r.doc_outdate?x(r==null?void 0:r.doc_outdate,"YYYY-MM-DD"):null,birth_day:r!=null&&r.birth_day?x(r==null?void 0:r.birth_day,"YYYY-MM-DD"):null,doc_time_provide:r!=null&&r.doc_time_provide?x(r==null?void 0:r.doc_time_provide,"YYYY-MM-DD"):null,organization:{...r.organization,doc_time_provide:(N=r==null?void 0:r.organization)!=null&&N.doc_time_provide?x((q=r==null?void 0:r.organization)==null?void 0:q.doc_time_provide,"YYYY-MM-DD"):null}}}])})},u*1e3)},[S]);const O=i=>{var r;let s=null,v=(r=n.current)==null?void 0:r.getFieldValue([..._,"origin_person",i,"present_person"]);const b=[..._,"origin_person",i];return v==="personal"?s=e.jsx(ue,{...a,ref:n,BASE_FORM:b,type:t==null?void 0:t.type}):v==="organization"&&(s=e.jsx(ie,{...a,ref:n,BASE_FORM:[..._,"origin_person",i],type:t==null?void 0:t.type})),s},z=()=>(l([...c,{}]),A()),A=()=>{let i=c.length-1,s=[..._,"origin_person",i,"present_person"];n.current.scrollToField(s,{behavior:"smooth"})},k=i=>{try{let s=n.current.getFieldValue([..._,"origin_person"]);s=[...s.slice(0,i),...s.slice(i+1)];let v=[...c.slice(0,i),...c.slice(i+1)];g([..._,"origin_person"],s,n),l(v)}catch{}},V=(i,s)=>{$(!o)},G=i=>(t==null?void 0:t.type)===3?`Cổ đông sáng lập ${(t==null?void 0:t.type)!==1?` thứ ${i+1}`:""}`:`Thành viên góp vốn ${(t==null?void 0:t.type)!==1?` thứ ${i+1}`:""}`;return e.jsx(p.Item,{className:U([f.hide,a.className,{[f.visible]:u===2}]),children:e.jsxs(J,{gutter:[16,12],children:[c.length<10&&(t==null?void 0:t.type)!==1?e.jsx(R,{span:24,style:{position:"sticky",top:"0",zIndex:1},children:e.jsx(E,{onClick:z,icon:e.jsx(K,{}),type:"primary",children:"Thêm thành viên góp vốn"})}):"",c.map((i,s)=>e.jsx(R,{span:24,children:e.jsxs(p.Item,{label:e.jsxs("div",{className:f.label,children:[e.jsx("div",{className:f.title,children:G(s)}),e.jsx(E,{type:"text",shape:"circle",danger:!0,icon:e.jsx(Q,{onClick:()=>k(s)}),style:{display:(t==null?void 0:t.type)==2&&c.length>2||(t==null?void 0:t.type)==3&&c.length>3?"block":"none"}})]}),children:[e.jsx(be,{BASE_FORM:_,index:s,ref:n,presentSelect:V}),O(s)]})},[..._,"origin_person",s]))]})})}),be=d.forwardRef((t,a)=>{const{BASE_FORM:n,index:u}=t;return e.jsx(p.Item,{name:[...n,"origin_person",u,"present_person"],rules:{required:!0,message:"Thành viên góp vốn là bắt buộc"},required:!0,children:e.jsxs(C,{placeholder:"Bấm vào đây",onChange:t.presentSelect,children:[e.jsx(C.Option,{value:"personal",children:"Thành viên góp vốn là cá nhân"}),e.jsx(C.Option,{value:"organization",children:"Thành viên góp vốn là tổ chức"})]})})});export{Se as default};
