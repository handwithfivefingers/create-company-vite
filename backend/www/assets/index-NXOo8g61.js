import{r as h,bp as C,j as e,F as g,b$ as A,bT as V,c as R,bU as x,R as v,C as b,a as B,bR as F,a2 as M,B as k,bY as Y,l as D,o as S,h as I}from"./index-XD4JDM6b.js";import{C as N}from"./index-gQ4A6Ldr.js";import{S as z}from"./Common-NVt6K1ML.js";import{M as $}from"./MinusCircleOutlined-OyZX2Wh6.js";import{V as P}from"./InputValidate-jV_t71oq.js";const G="_current_1juf4_1",L="_active_1juf4_5",U="_formHorizontal_1juf4_9",H={current:G,active:L,formHorizontal:U},J="_current_1whfl_1",q="_active_1whfl_5",Q="_formHorizontal_1whfl_9",W="_groupInput_1whfl_13",K="_flexStyles_1whfl_20",y={current:J,active:q,formHorizontal:Q,groupInput:W,flexStyles:K},c=["pending","approve"],X=h.forwardRef(({type:o,current:r,index:i},a)=>{const[p,d]=h.useState(""),u=C();h.useEffect(()=>{if(u.state){let n=a.current.getFieldsValue();n&&r==i&&d(n)}},[u,r]);const j=(n,m)=>{a.current.setFields([{name:Array.isArray(m)?[...m]:[m],value:n.target.value.toUpperCase()}])},l=h.useMemo(()=>{let n=null;return o&&(+o==3?n=e.jsxs(e.Fragment,{children:[e.jsx(g.Item,{label:A.approve.fields.location.label,children:e.jsx(N.SelectProvince,{label:"Địa chỉ trụ sở chính",name:[...c,"location"],placeholder:"Địa chỉ trụ sở chính"})}),e.jsx(Z,{BASE_FORM:c,ref:a})]}):+o==2&&(n=e.jsxs(e.Fragment,{children:[e.jsx(g.Item,{label:V("<b>Địa chỉ trụ sở chính</b>"),children:e.jsx(N.SelectProvince,{label:"Địa chỉ trụ sở chính",name:[...c,"location"],placeholder:"Địa chỉ trụ sở chính"})}),e.jsx(ee,{BASE_FORM:c,ref:a})]}))),n},[o]),t=n=>{let m=a.current.getFieldValue([...c,"time_range","start"]);return n&&n<m.endOf("day")},s=n=>n&&n<S().endOf("day");return e.jsxs(g.Item,{className:R(y.groupInput,y.current,{[y.active]:r===i}),children:[e.jsx(x,{name:[...c,"company_name"],label:"Nhập tên doanh nghiệp",placeholder:"CÔNG TY TNHH DỊCH VỤ TƯ VẤN WARREN B",onChange:n=>j(n,[...c,"company_name"]),required:!0,message:"B2. Vui lòng Nhập tên doanh nghiệp"}),e.jsx(x,{name:[...c,"mst"],label:"Mã số doanh nghiệp hoặc Mã số thuế",placeholder:"0316184427"}),e.jsx(x,{name:[...c,"org_person"],label:V("Người đại diện pháp luật <i>(nhập đầy đủ họ và tên)</i>"),placeholder:"NGUYỄN VĂN A",onChange:n=>j(n,[...c,"org_person"])}),l,e.jsx(x,{type:"select",name:[...c,"obj"],label:"Chọn đối tượng thông báo tạm ngưng kinh doanh",onChange:(n,m)=>d(n),options:z.BUSINESS_OBJECT,placeholder:"Bấm vào đây"}),p==="Chi nhánh hoặc Văn phòng đại diện hoặc Địa điểm kinh doanh"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{name:[...c,"branch_name"],label:e.jsxs(e.Fragment,{children:["Nhập tên ",e.jsx("i",{children:" (của Chi nhánh hoặc Văn phòng đại diện hoặc Địa điểm kinh doanh)"})]}),placeholder:"CHI NHÁNH CÔNG TY TNHH DỊCH VỤ TƯ VẤN WARREN B",onChange:n=>j(n,[...c,"branch_name"])}),e.jsx(x,{name:[...c,"resp_office"],label:e.jsxs(e.Fragment,{children:["Nhập Mã số ",e.jsx("i",{children:" (của Chi nhánh hoặc Văn phòng đại diện hoặc Địa điểm kinh doanh)"})]}),placeholder:"0316184427 - 001"}),e.jsx(N.SelectProvince,{name:[...c]})]}),e.jsx(g.Item,{label:e.jsxs(e.Fragment,{children:["Thời gian đăng ký tạm ngừng kinh doanh ",e.jsx("i",{children:" (tối đa 12 tháng, ngày bắt đầu tạm ngừng sau ít nhất 3 ngày làm việc kể từ ngày nộp hồ sơ)"})]}),children:e.jsxs(v,{gutter:[16,12],children:[e.jsx(b,{lg:12,md:24,sm:24,xs:24,children:e.jsx(x,{name:[...c,"time_range","start"],label:"Từ ngày",type:"date",layout:"horizontal",placeholder:"15/01/2022 - ENTER",disabledDate:s})}),e.jsx(b,{lg:12,md:24,sm:24,xs:24,children:e.jsx(x,{name:[...c,"time_range","end"],label:"Đến ngày",type:"date",layout:"horizontal",placeholder:"15/01/2023 - ENTER",disabledDate:t})})]})})]})}),Z=h.forwardRef((o,r)=>{const{BASE_FORM:i}=o,[a,p]=h.useState([{}]),d=C();h.useEffect(()=>{var l;if(d.state){let t=(l=r.current)==null?void 0:l.getFieldValue([...i,"list_president"]);t.length&&u(t.length-1)}},[d]),h.useEffect(()=>{a.length<=1&&u(2)},[]);const u=(l=1)=>{let t=[];for(let s=0;s<l;s++)t.push({});p([...a,...t])},j=l=>{var n;let t=JSON.parse(JSON.stringify(a));t.splice(l,1),p(t);let s=(n=r.current)==null?void 0:n.getFieldValue([...i,"list_president"]);s==null||s.splice(l,1),F([...i,"list_president"],s,r)};return e.jsx(g.Item,{label:"Hội đồng quản trị",children:e.jsxs(v,{gutter:[16,12],children:[a==null?void 0:a.map((l,t)=>e.jsx(b,{lg:12,md:12,sm:24,xs:24,children:e.jsx(B,{className:"box__shadow",size:"small",title:t===0?"Tên Chủ tịch HĐQT":`Tên thành viên HĐQT ${t}`,extra:[e.jsx(w,{inValid:a.length<=3,onClick:()=>j(t)})],children:e.jsx(v,{children:e.jsx(b,{span:24,children:e.jsx(x,{name:[...i,"list_president",t,"president"],placeholder:"NGUYỄN VĂN A"})})})})},[...i,"list_president",t,"president"])),e.jsx(O,{inValid:a.length>=5,onClick:()=>u(),btnText:"Thêm thành viên HĐQT (nếu có)"})]})})}),ee=h.forwardRef((o,r)=>{const{BASE_FORM:i}=o,[a,p]=h.useState([{},{}]),d=C();h.useEffect(()=>{var l;if(d.state){let t=(l=r.current)==null?void 0:l.getFieldValue([...i,"contribute_members"]);t!=null&&t.length&&u(t.length-1)}},[d]),h.useEffect(()=>{a.length<=1&&u(1)},[]);const u=(l=1)=>{let t=[];for(let s=0;s<l;s++)t.push({});p([...a,...t])},j=l=>{var n;let t=JSON.parse(JSON.stringify(a));t.splice(l,1),p(t);let s=(n=r.current)==null?void 0:n.getFieldValue([...i,"contribute_members"]);s.splice(l,1),F([...i,"contribute_members"],s,r)};return e.jsx(g.Item,{label:"Hội đồng thành viên",children:e.jsxs(v,{gutter:[16,12],children:[a==null?void 0:a.map((l,t)=>e.jsx(b,{lg:12,md:12,sm:24,xs:24,children:e.jsx(B,{className:"box__shadow",size:"small",title:`Tên thành viên góp vốn thứ ${t+1}`,extra:[e.jsx(w,{inValid:a.length<=2,onClick:()=>j(t)})],children:e.jsxs(v,{gutter:[16],children:[e.jsx(b,{span:24,children:e.jsx(x,{name:[...i,"contribute_members",t,"name"],label:"Họ và Tên",onChange:s=>{let n=[...i,"contribute_members",t,"name"];F(n,s.target.value,r,!0)}})}),e.jsx(b,{span:12,children:e.jsx(g.Item,{name:[...i,"contribute_members",t,"capital"],label:"Vốn góp",children:e.jsx(M,{style:{width:"100%"},placeholder:"80,000,000",formatter:s=>`${new Intl.NumberFormat("en-US").format(s.replace(/,/g,""))}`,stringMode:!0})})}),e.jsx(b,{span:12,children:e.jsx(g.Item,{name:[...i,"contribute_members",t,"capital_percent"],label:"Chiếm % vốn điều lệ",children:e.jsx(M,{style:{width:"100%"},max:100,min:0,length:3,placeholder:"80%",formatter:s=>`${s.replace("%","")}%`,stringMode:!0})})})]})})},[...i,"contribute_members",t,"president"])),e.jsx(O,{inValid:a.length>=5,onClick:()=>u(),btnText:"Thêm thành viên góp vốn (nếu có)"})]})})}),O=h.memo(({inValid:o,btnText:r,onClick:i})=>o?"":e.jsx(b,{lg:12,md:12,sm:24,xs:24,children:e.jsx(g.Item,{label:" ",children:e.jsx(k,{type:"dashed",onClick:i,block:!0,icon:e.jsx(Y,{}),children:r})})})),w=h.memo(({inValid:o,onClick:r})=>o?"":e.jsx(D,{className:y.flexStyles,children:e.jsx($,{onClick:r})})),re=h.forwardRef((o,r)=>{var l;const[i]=g.useForm(),[a,p]=h.useState({type:1,value:"",name:""}),d=C();h.useEffect(()=>{d.state&&u()},[d]);const u=()=>{var T,E;let{state:t}=d,s={},{category:n,data:m}=t;if(n){if(s.category={type:n.type,value:n._id,name:n.name},m){let f=(T=m==null?void 0:m.pending)==null?void 0:T.approve;if(f){let{time_range:_}=f;_&&(_.start=S(_.start,"YYYY-MM-DD"),_.end=S(_.end,"YYYY-MM-DD")),f={...f,time_range:_}}s.pending={approve:f}}p(s.category),(E=r.current)==null||E.setFieldsValue({...s})}},j=({type:t,value:s,name:n},m)=>{p({type:t,value:s,name:n}),r.current.setFields([{name:[m],value:{type:t,value:s,name:n}}]),o.onFinishScreen&&o.onFinishScreen({type:t,value:s,name:n})};return e.jsxs(g,{ref:r,layout:"vertical",form:i,children:[e.jsx(g.Item,{name:"category",label:"Chọn loại hình doanh nghiệp",required:!0,validateMessages:P,className:R(H.current,{[H.active]:o.current===0}),children:e.jsx(I,{onChange:(t,s)=>j(s,"category"),placeholder:"Bấm vào đây",children:(l=o.data)==null?void 0:l.map(t=>e.jsx(I.Option,{value:t._id,...t,children:t.name},t._id))})}),e.jsx(X,{ref:r,current:o.current,index:1,type:a==null?void 0:a.type})]})});export{re as default};
