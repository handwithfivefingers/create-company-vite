import{bk as S,aV as D,bu as m,R as F,C as g,a as p,bj as a,ab as r,ac as w,bv as k,ad as n}from"./index.bd197d1a.js";import{a as l,n as C,d,j as e}from"./vendor.aa9f5085.js";const{useBreakpoint:j}=k,M=N=>{const[b,B]=l.exports.useState(!1),{animateClass:o}=C(),E=l.exports.useRef(),h=l.exports.useRef(),i=j(),y=S(t=>t.authReducer),{data:c,refetch:u,status:T,isLoading:x}=D({cacheName:["userProfile"],fn:()=>P(),enabled:y.status&&!0||!1}),P=()=>m.getProfile(),_=async t=>{try{console.log(t);let{confirm_password:s,new_password:I,old_password:R}=t;if(!R)throw{message:"Password is incorrect"};if(s!==I)throw{message:"Password does not match"};let f=await m.changePassword(t);if(f.data.status===200)n.success(f.data.message);else throw{message:"Something went wrong"}}catch(s){n.error(s.message||s.response.data.error||s.response.data.message)}finally{u()}},A=async t=>{try{let s=await m.changeProfile(t);if(!s)throw{message:"Something went wrong"};if(s.data.status===200)n.success(s.data.message);else throw{message:"Something went wrong"}}catch(s){n.error(s.message||s.response.data.error||s.response.data.message)}finally{u()}};return l.exports.useEffect(()=>{c&&h.current.setFieldsValue({...c})},[c]),console.log("screen",i),d(F,{className:o!=null?o:o,children:[e(g,{lg:8,sm:24,xs:24,md:12,order:i.md?0:1,children:e(p,{title:"\u0110\u1ED5i m\u1EADt kh\u1EA9u",style:{height:"100%"},children:d(a,{onFinish:_,ref:E,layout:"vertical",children:[e(a.Item,{label:"M\u1EADt kh\u1EA9u hi\u1EC7n t\u1EA1i",name:"old_password",children:e(r,{})}),e(a.Item,{label:"M\u1EADt kh\u1EA9u m\u1EDBi",name:"new_password",children:e(r,{})}),e(a.Item,{label:"X\xE1c th\u1EF1c m\u1EADt kh\u1EA9u",name:"confirm_password",children:e(r,{})}),e(a.Item,{children:e(w,{type:"primary",htmlType:"submit",loading:x,children:"Submit"})})]})})}),e(g,{lg:16,sm:24,xs:24,md:12,className:i.md?"p-l-8":"",children:e(p,{title:"Th\xF4ng tin c\xE1 nh\xE2n",children:d(a,{onFinish:A,ref:h,layout:"vertical",children:[e(a.Item,{label:"Name",name:"name",children:e(r,{})}),e(a.Item,{label:"Phone",name:"phone",children:e(r,{})}),e(a.Item,{label:"Email",name:"email",children:e(r,{})}),e(a.Item,{children:e(w,{type:"primary",htmlType:"submit",loading:b,children:"Submit"})})]})})})]})};export{M as default};
