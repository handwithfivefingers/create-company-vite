import{T as l,C as Y}from"./index.ede18334.js";import{r,k as R,c as p,F as E,j as a,L as H}from"./vendor.e5394fe2.js";import{D as G}from"./index.cf2bf8b5.js";import{aV as V,aW as g,aX as $,aY as Q,ad as f,aZ as X,h as Z,ac as q,S as I,R as J,ae as C}from"./index.eab64f24.js";import{A as b}from"./AdminOrderService.60e31c20.js";import{A as U}from"./index.a73b9fb4.js";import{M as K}from"./index.55ca9bce.js";import{P as tt}from"./index.ac0c8d4a.js";import{T as c}from"./index.5156c0d7.js";import{F as et}from"./FormOutlined.4d08f43e.js";import"./index.41d5f52d.js";import"./Pagination.afeba8cf.js";import"./index.8c8a84c0.js";import"./getDataOrAriaProps.08708643.js";import"./MoreOutlined.f695b609.js";import"./ActionButton.235e34b5.js";const at="_inline_1j3vy_78",nt="_box__shadow_1j3vy_139",it="_searchForm_1j3vy_161",ot="_header_1j3vy_176",lt="_inpSearch_1j3vy_183",st="_tableWrapper_1j3vy_187",rt="_pagination_1j3vy_200",ct="_contentWrapper_1j3vy_206",m={"ant-table-scroll-horizontal":"_ant-table-scroll-horizontal_1j3vy_1","ant-table-container":"_ant-table-container_1j3vy_1","ant-table-content":"_ant-table-content_1j3vy_1","ant-layout-sider-trigger":"_ant-layout-sider-trigger_1j3vy_24","ant-layout-footer":"_ant-layout-footer_1j3vy_29","ant-form-item-control-input-content":"_ant-form-item-control-input-content_1j3vy_33","ant-picker":"_ant-picker_1j3vy_48","ant-select-selector":"_ant-select-selector_1j3vy_49","ant-form-item":"_ant-form-item_1j3vy_33","ant-row":"_ant-row_1j3vy_62","site-layout-background":"_site-layout-background_1j3vy_66","spin-suspense":"_spin-suspense_1j3vy_70",inline:at,"cc-scroll":"_cc-scroll_1j3vy_90","cc-card":"_cc-card_1j3vy_114",box__shadow:nt,"ant-tabs-content-holder":"_ant-tabs-content-holder_1j3vy_143","ant-tabs-content":"_ant-tabs-content_1j3vy_143","ant-tabs-tabpane":"_ant-tabs-tabpane_1j3vy_149",searchForm:it,header:ot,inpSearch:lt,tableWrapper:st,pagination:rt,contentWrapper:ct},wt=()=>{r.exports.useState(!1);const[j,S]=r.exports.useState([]),[h,w]=r.exports.useState({visible:!1,component:null,width:0}),[d,D]=r.exports.useState(1);r.exports.useRef(null);const F=R(),{data:u,isLoading:M,status:A,refetch:k}=V({cacheName:["adminOrder"],fn:()=>b.getOrder()}),_={current:d,total:u==null?void 0:u.count,showSizeChanger:!1,pageSize:10,onChange:(e,t)=>D(e)};r.exports.useEffect(()=>{A==="success"&&u&&S(e=>{let{_order:t}=u;return t==null?void 0:t.slice((d-1)*_.pageSize,(d-1)*_.pageSize+_.pageSize)})},[d,u]);const T=async e=>{try{let t=await b.deleteOrder(e);t.data.status===200?C.success(t.data.message):C.error(t.data.message)}catch(t){console.log(t)}finally{k()}},N=r.exports.useCallback(()=>{w({...h,visible:!1})},[h]),O=e=>{let t=null;return t=p(Q,{children:[a(f,{type:"primary",icon:a(H,{to:`/admin/order/${e==null?void 0:e._id}`,children:a(X,{})})}),a(f,{type:"primary",onClick:()=>W(e),icon:a(et,{})}),a(tt,{placement:"topRight",title:"B\u1EA1n c\xF3 mu\u1ED1n xo\xE1 ?",onConfirm:()=>T(e._id),okText:"Yes",cancelText:"No",children:a(f,{icon:a(G,{})})})]}),t},W=e=>{let{data:t}=e,n=null;for(let i in t)i==="pending"?n="tam-ngung":i==="change_info"?n="thay-doi-thong-tin":i==="dissolution"?n="giai-the":i==="create_company"&&(n="thanh-lap-doanh-nghiep");F(`/user/san-pham/${n}`,{state:{...e}})},z=e=>{let t=Z(e.createdAt).format("HH:mm DD-MM-YYYY ");return a("span",{style:{display:"block",width:120},children:t})},B=e=>(e==null?void 0:e.payment)===1?a(c,{color:"green",children:"\u0110\xE3 thanh to\xE1n"},g(9)):a(c,{color:"volcano",children:"Ch\u01B0a thanh to\xE1n"},g(9)),L=(e,t,n)=>{var i,s,o,x;if((i=t==null?void 0:t.data)!=null&&i.create_company)return a(c,{color:"#108ee9",children:"Th\xE0nh l\u1EADp doanh nghi\u1EC7p"},[Math.random(),Math.random().toFixed(Math.random()*10)]);if((s=t==null?void 0:t.data)!=null&&s.change_info)return a(c,{color:"#108ee9",children:"Thay \u0111\u1ED5i th\xF4ng tin"},[Math.random(),Math.random().toFixed(Math.random()*10)]);if((o=t==null?void 0:t.data)!=null&&o.pending)return a(c,{color:"#108ee9",children:"T\u1EA1m ho\xE3n"},[Math.random(),Math.random().toFixed(Math.random()*10)]);if((x=t==null?void 0:t.data)!=null&&x.dissolution)return a(c,{color:"#108ee9",children:"Gi\u1EA3i th\u1EC3"},[Math.random(),Math.random().toFixed(Math.random()*10)])},v=(e=null,t,n=null)=>{t(),setSearchText(e[0]),setSearchedColumn([...n])},y=e=>({filterDropdown:({setSelectedKeys:t,selectedKeys:n,confirm:i,clearFilters:s})=>a("div",{style:{padding:8},children:a(q.Search,{placeholder:"T\xECm ki\u1EBFm",value:n[0],onChange:o=>t(o.target.value?[o.target.value]:[]),onPressEnter:()=>v(n,i,e),onSearch:()=>v(n,i,e),allowClear:!0,className:m.inpSearch,enterButton:!0})}),filterIcon:t=>a(I,{style:{color:t?"#1890ff":void 0}}),onFilter:(t,n)=>{let[i,s]=e,o=n==null?void 0:n[i];return s&&(o=o==null?void 0:o[s]),o==null?void 0:o.toString().toLowerCase().includes(t.toLowerCase())}}),P=(e,t,n)=>{let i=[];return t!=null&&t.products&&(i=a(J,{gutter:[12,4],children:t.products.map(s=>a(c,{color:"#108ee9",children:s.name},g(9)))})),i};return p(E,{children:[a(U,{title:"Qu\u1EA3n l\xFD \u0111\u01A1n h\xE0ng"}),p("div",{className:m.contentWrapper,children:[a("div",{className:m.tableWrapper,children:p(l,{dataSource:j,loading:{spinning:M,tip:"Loading...",delay:100},bordered:!0,className:"table",pagination:!1,rowKey:e=>e._id||g(9),children:[a(l.Column,{title:"\u0110\u01A1n h\xE0ng",width:210,render:(e,t,n)=>t==null?void 0:t._id,...y(["_id"])}),a(l.Column,{className:m.inline,title:"Ng\u01B0\u1EDDi \u0111\u0103ng k\xED",width:"175px",render:(e,t,n)=>{var i;return a("span",{children:(i=t==null?void 0:t.orderOwner)==null?void 0:i.email})},...y(["orderOwner","email"])}),a(l.Column,{title:"S\u1EA3n ph\u1EA9m",render:L}),a(l.Column,{title:"D\u1ECBch v\u1EE5",width:210,render:P}),a(l.Column,{className:m.inline,title:"Gi\xE1 ti\u1EC1n",width:"175px",render:(e,t,n)=>p(E,{children:[$(t==null?void 0:t.price)," VND"]})}),a(l.Column,{title:"Thanh to\xE1n",width:150,render:(e,t,n)=>B(t)}),a(l.Column,{title:"Ng\xE0y t\u1EA1o",width:150,render:(e,t,n)=>z(t)}),a(l.Column,{title:"Thao t\xE1c",width:104,render:(e,t,n)=>O(t)})]})}),a("div",{className:m.pagination,children:a(Y,{..._})}),h.visible&&a(K,{footer:null,onCancel:()=>N(),visible:h.visible,width:h.width,children:h.component})]})]})};export{wt as default};
