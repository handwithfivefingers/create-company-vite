import{r,ae as O,ao as w,f as E,ap as _,j as a,c as P,o as z,n as Y,B as d,T as p,aq as G,b as H,m as v}from"./index-XD4JDM6b.js";import{C as R}from"./index-akrSOs4w.js";import{P as W}from"./Payment-Xt6o7eCM.js";import{T as o}from"./Table-UH30mYPz.js";import{P as A}from"./index-K-fwyXvc.js";import{F as T}from"./FormOutlined-lKW3anG1.js";import{D as B}from"./DeleteOutlined-bNd3EvOf.js";import"./dropdown-D6H3nMuz.js";import"./index-gcWtjv3K.js";import"./index-Rc3KqxQe.js";import"./index-ehUL30Ed.js";const L="_btnGroup_lntjr_1",V="_orderWrapper_lntjr_20",q="_pagination_lntjr_34",c={btnGroup:L,orderWrapper:V,pagination:q},K=r.lazy(()=>O(()=>import("./index-rHlGbDSC.js"),__vite__mapDeps([0,1,2,3]))),ln=()=>{var y;const{animateClass:b}=w(),[M,u]=r.useState(!1),[m,S]=r.useState([]),[g,k]=r.useState(1),x=r.useRef();let D=E();r.useEffect(()=>{f()},[]);const f=async()=>{try{u(!0);const t=await _.getOrders();S(t.data)}catch{}finally{u(!1)}},j=t=>{let{data:n}=t,e=null;for(let s in n)s==="pending"?e="tam-ngung":s==="change_info"?e="thay-doi-thong-tin":s==="dissolution"?e="giai-the":s==="create_company"&&(e="thanh-lap-doanh-nghiep");D(`/user/san-pham/${e}`,{state:{...t}})},F=(t,n,e)=>{var s,i,l,C;if((s=n==null?void 0:n.data)!=null&&s.create_company)return a.jsxs(a.Fragment,{children:[a.jsx(p,{color:"#108ee9",children:"Thành lập doanh nghiệp"},[Math.random(),Math.random().toFixed(Math.random()*10)]),"- ",n.category.name]});if((i=n==null?void 0:n.data)!=null&&i.change_info)return a.jsxs(a.Fragment,{children:[a.jsx(p,{color:"#108ee9",children:"Thay đổi thông tin"},[Math.random(),Math.random().toFixed(Math.random()*10)]),"- ",n.category.name]});if((l=n==null?void 0:n.data)!=null&&l.pending)return a.jsxs(a.Fragment,{children:[a.jsx(p,{color:"#108ee9",children:"Tạm hoãn"},[Math.random(),Math.random().toFixed(Math.random()*10)]),"- ",n.category.name]});if((C=n==null?void 0:n.data)!=null&&C.dissolution)return a.jsxs(a.Fragment,{children:[a.jsx(p,{color:"#108ee9",children:"Giải thể"},[Math.random(),Math.random().toFixed(Math.random()*10)]),"- ",n.category.name]})},I=async t=>{var n,e,s;try{const i=await _.deleteOrder(t);v.success(i.data.message)}catch(i){const l=((e=(n=i.response)==null?void 0:n.data)==null?void 0:e.message)||((s=i.response)==null?void 0:s.message)||i.message||"Đã có lỗi xảy ra , vui lòng liên hệ admin";v.error(l)}finally{f()}},N=t=>{x.current.openModal(),x.current.onSetData({...t.transactionId,price:t.price})},h={current:g,total:m==null?void 0:m.count,pageSize:10,onChange:(t,n)=>k(t)};return a.jsxs("div",{className:P([b,c.orderWrapper]),children:[a.jsxs("div",{className:"cc-scroll",style:{backgroundColor:"#fff"},children:[a.jsxs(o,{size:"small",bordered:!0,dataSource:(y=m==null?void 0:m.data)==null?void 0:y.slice((g-1)*h.pageSize,(g-1)*h.pageSize+h.pageSize),loading:{spinning:M,tip:"Loading...",delay:100},rowKey:t=>t._id,pagination:!1,children:[a.jsx(o.Column,{align:"center",title:"Mã đơn",fixed:"left",dataIndex:"per_main",render:(t,n,e)=>n._id}),a.jsx(o.Column,{align:"left",title:"Dịch vụ",dataIndex:"",render:F,width:250}),a.jsx(o.Column,{align:"center",title:"Ngày tạo",render:(t,n,e)=>a.jsx("span",{style:{display:"block",width:"80px"},children:z(n.createdAt).format("DD/MM/YYYY")})}),a.jsx(o.Column,{align:"center",title:"Giá tiền",render:(t,n,e)=>a.jsxs("span",{style:{display:"block",width:"150px"},children:[Y(n==null?void 0:n.price)," VND"]})}),a.jsx(o.Column,{align:"center",title:"Hóa đơn",render:(t,n,e)=>{var i,l;return((i=n==null?void 0:n.transactionId)==null?void 0:i.paymentType)?a.jsx(d,{style:{display:"block",width:"150px"},onClick:()=>N(n),type:"primary",children:((l=n==null?void 0:n.transactionId)==null?void 0:l.paymentCode)||"-"}):"-"}}),a.jsx(o.Column,{align:"center",title:"Cổng thanh toán",style:{width:150},dataIndex:"",render:(t,n,e)=>{var i,l;return((i=n==null?void 0:n.transactionId)==null?void 0:i.paymentType)?a.jsx("span",{style:{display:"block",width:"150px"},children:W[(l=n==null?void 0:n.transactionId)==null?void 0:l.paymentType]}):"-"}}),a.jsx(o.Column,{align:"center",title:"Thanh toán",dataIndex:"",render:(t,n,e)=>{var s;return(s=n==null?void 0:n.transactionId)!=null&&s.isPayment?a.jsx(p,{color:"green",children:"Đã thanh toán"}):a.jsx(p,{color:"volcano",children:"Chưa thanh toán"})}}),a.jsx(o.Column,{align:"center",width:100,render:(t,n,e)=>a.jsx("div",{className:c.btnGroup,children:n.payment?a.jsx(d,{className:c.btn,onClick:()=>j(n),disabled:!0,type:"primary",icon:a.jsx(T,{}),sise:"middle"}):a.jsxs(a.Fragment,{children:[a.jsx(G,{title:"Chỉnh sửa & Thanh toán",color:"blue",placement:"left",children:a.jsx(d,{className:c.btn,onClick:()=>j(n),type:"primary",icon:a.jsx(T,{}),sise:"middle"})}),a.jsx(A,{placement:"topRight",title:"Bạn có muốn xoá ?",onConfirm:()=>I(n._id),okText:"Yes",cancelText:"No",children:a.jsx(d,{icon:a.jsx(B,{})})})]})})})]}),a.jsx(r.Suspense,{fallback:a.jsx(H,{}),children:a.jsx(K,{ref:x})})]}),a.jsx("div",{className:c.pagination,children:a.jsx(R,{...h})})]})};export{ln as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-rHlGbDSC.js","assets/index-XD4JDM6b.js","assets/index-vhdyNjOD.css","assets/Payment-Xt6o7eCM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}