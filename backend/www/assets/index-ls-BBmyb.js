import{r as o,j as e,F as p,a2 as y,c as E,R as _,C as u,bU as b,bT as T,bp as N,a as I,bR as S,B as R,bY as q,l as w,o as f,h as C}from"./index-XD4JDM6b.js";import{C as A}from"./index-gQ4A6Ldr.js";import{M as B}from"./MinusCircleOutlined-OyZX2Wh6.js";import{V as O}from"./InputValidate-jV_t71oq.js";const H="_current_luggi_1",$="_active_luggi_5",Y="_groupInput_luggi_9",k="_flexStyles_luggi_16",v={current:H,active:$,groupInput:Y,flexStyles:k},m=["dissolution","approve"],U=o.forwardRef((c,l)=>{const[i,a]=o.useState(1);o.useEffect(()=>{let{category:n}=l.current.getFieldsValue();n!=null&&n.type&&a(n==null?void 0:n.type)},[c]);const d=(n,h)=>{l.current.setFields([{name:Array.isArray(h)?[...h]:[h],value:n.target.value.toUpperCase()}])},g=o.useMemo(()=>{let n=null;return+i==3?n=e.jsxs(e.Fragment,{children:[e.jsx(G,{BASE_FORM:m,ref:l}),e.jsx(p.Item,{label:"Tổng số vốn điều lệ",name:[...m,"total_capital"],required:!0,rules:{required:!0,message:"Tổng số vốn điều lệ là bắt buộc"},children:e.jsx(y,{placeholder:"100,000,000",formatter:h=>`${new Intl.NumberFormat("en-US").format(h.replace(/,/g,""))}`,style:{width:"100%"}})})]}):+i==2&&(n=e.jsx(L,{BASE_FORM:m,ref:l})),n},[i]);return e.jsx(p.Item,{className:E(v.groupInput,v.current,{[v.active]:c.current===c.index}),children:e.jsxs(_,{gutter:[12,12],children:[e.jsx(u,{lg:12,md:24,sm:24,xs:24,children:e.jsx(b,{label:"Nhập tên doanh nghiệp",name:[...m,"company_name"],placeholder:"CÔNG TY TNHH DỊCH VỤ TƯ VẤN WARREN B",onChange:n=>d(n,[...m,"company_name"]),required:!0})}),e.jsx(u,{lg:12,md:24,sm:24,xs:24,children:e.jsx(b,{label:"Nhập mã số doanh nghiệp hoặc Mã số thuế",name:[...m,"mst"],placeholder:"0316184427",required:!0})}),e.jsx(u,{lg:12,md:24,sm:24,xs:24,children:e.jsx(b,{type:"date",label:"Ngày cấp",name:[...m,"mst_provide"],placeholder:"15/01/1966 - ENTER",inputReadOnly:!1,required:!0})}),e.jsx(u,{lg:12,md:24,sm:24,xs:24,children:e.jsx(b,{label:T("Người đại diện pháp luật <i>(nhập đầy đủ họ và tên)</i>"),name:[...m,"org_person"],placeholder:"NGUYỄN VĂN A",onChange:n=>d(n,[...m,"org_person"]),required:!0,message:"Người đại diện pháp luật (nhập đầy đủ họ và tên) là bắt buộc!"})}),e.jsx(u,{lg:12,md:24,sm:24,xs:24,children:e.jsx(b,{name:[...m,"dissolution_number"],label:"Số quyết định giải thể",style:{width:"100%"}})}),e.jsx(u,{lg:12,md:24,sm:24,xs:24,children:e.jsx(b,{type:"date",name:[...m,"dissolution_date"],label:"Ngày quyết định giải thể"})}),e.jsx(u,{span:24,children:e.jsx(p.Item,{label:T("<b>Địa chỉ trụ sở chính</b>"),children:e.jsx(A.SelectProvince,{name:[...m,"location"],placeholder:"Nhập địa chỉ trụ sở chính",label:"Địa chỉ trụ sở chính",required:!0})})}),g]})})}),G=o.forwardRef((c,l)=>{const{BASE_FORM:i}=c,[a,d]=o.useState([{}]),g=N();o.useEffect(()=>{var r;if(g.state){let t=(r=l.current)==null?void 0:r.getFieldValue([...i,"list_president"]);t.length&&n(t.length-1)}},[g]),o.useEffect(()=>{a.length<=1&&n(2)},[]);const n=(r=1)=>{let t=[];for(let s=0;s<r;s++)t.push({});d([...a,...t])},h=r=>{var x;let t=JSON.parse(JSON.stringify(a));t.splice(r,1),d(t);let s=(x=l.current)==null?void 0:x.getFieldValue([...i,"list_president"]);s==null||s.splice(r,1),S([...i,"list_president"],s,l)};return e.jsx(p.Item,{label:"Đại hội đồng cổ đông",style:{width:"100%"},children:e.jsxs(_,{gutter:[16,12],children:[a==null?void 0:a.map((r,t)=>e.jsx(u,{lg:12,md:12,sm:24,xs:24,children:e.jsx(I,{className:"box__shadow",size:"small",title:t===0?"Tên Chủ tịch HĐQT":`Tên Cổ đông thứ ${t}`,extra:[e.jsx(V,{inValid:a.length<=3,onClick:()=>h(t)})],children:e.jsx(_,{children:e.jsx(u,{span:24,children:e.jsx(b,{name:[...i,"list_president",t,"president"],placeholder:"NGUYỄN VĂN A",required:!0,message:t===0?"Tên Chủ tịch HĐQT  là bắt buộc":`Tên thành viên HĐQT ${t} là bắt buộc`})})})})},[...i,"list_president",t,"president"])),e.jsx(M,{inValid:a.length>=5,onClick:()=>n(),btnText:"Thêm thành viên HĐQT (nếu có)"})]})})}),L=o.forwardRef((c,l)=>{const{BASE_FORM:i}=c,[a,d]=o.useState([{},{}]),g=N();o.useEffect(()=>{var r;if(g.state){let t=(r=l.current)==null?void 0:r.getFieldValue([...i,"contribute_members"]);t!=null&&t.length&&n(t.length-1)}},[g]),o.useEffect(()=>{a.length<=1&&n(1)},[]);const n=(r=1)=>{let t=[];for(let s=0;s<r;s++)t.push({});d([...a,...t])},h=r=>{var t;try{let s=JSON.parse(JSON.stringify(a)),x=s.splice(r,1);d(s);let j=(t=l.current)==null?void 0:t.getFieldValue([...i,"contribute_members"]),J=j==null?void 0:j.splice(r,1);S([...i,"contribute_members"],j,l)}catch{}};return e.jsx(p.Item,{label:"Hội đồng thành viên",children:e.jsxs(_,{gutter:[16,12],children:[a==null?void 0:a.map((r,t)=>e.jsx(u,{lg:12,md:12,sm:24,xs:24,children:e.jsx(I,{className:"box__shadow",size:"small",title:`Tên thành viên góp vốn thứ ${t+1}`,extra:[e.jsx(V,{inValid:a.length<=2,onClick:()=>h(t)})],children:e.jsxs(_,{gutter:[16],children:[e.jsx(u,{span:24,children:e.jsx(b,{name:[...i,"contribute_members",t,"name"],label:"Họ và Tên",onChange:s=>{let x=[...i,"contribute_members",t,"name"];S(x,s.target.value,l,!0)},required:!0})}),e.jsx(u,{span:12,children:e.jsx(p.Item,{name:[...i,"contribute_members",t,"capital"],label:"Vốn góp",required:!0,rules:[{required:!0,message:"Vốn góp là bắt buộc"}],children:e.jsx(y,{style:{width:"100%"},placeholder:"80,000,000",formatter:s=>`${new Intl.NumberFormat("en-US").format(s.replace(/,/g,""))}`,stringMode:!0})})}),e.jsx(u,{span:12,children:e.jsx(p.Item,{name:[...i,"contribute_members",t,"capital_percent"],label:"Chiếm % vốn điều lệ",required:!0,rules:[{required:!0,message:"% vốn điều lệ là bắt buộc"}],children:e.jsx(y,{style:{width:"100%"},max:100,min:0,length:3,placeholder:"80%",formatter:s=>`${s.replace("%","")}%`,stringMode:!0})})})]})})},[...i,"contribute_members",t,"president"])),e.jsx(M,{inValid:a.length>=5,btnText:"Thêm thành viên góp vốn (nếu có)",onClick:()=>n()})]})})}),M=o.memo(({inValid:c,btnText:l,onClick:i})=>c?"":e.jsx(u,{lg:12,md:12,sm:24,xs:24,children:e.jsx(p.Item,{label:" ",children:e.jsx(R,{type:"dashed",onClick:i,block:!0,icon:e.jsx(q,{}),children:l})})})),V=o.memo(({inValid:c,onClick:l})=>c?"":e.jsx(w,{className:v.flexStyles,children:e.jsx(B,{onClick:l})})),Q="_current_146ss_1",D="_active_146ss_5",F={current:Q,active:D},X=o.forwardRef((c,l)=>{var h;const[i,a]=o.useState(),d=N();o.useEffect(()=>{d.state&&g()},[d]);const g=()=>{var j;let{state:r}=d,{category:t,data:s}=r,x={...s,dissolution:{approve:{...s.dissolution.approve,mst_provide:f(s.dissolution.mst_provide),dissolution_date:f(s.dissolution.dissolution_date)}}};t&&(x.category={type:t.type,value:t._id,name:t.name},a(x.category),(j=l.current)==null||j.setFieldsValue({...x}))},n=(r,t,s)=>{a(t),l.current.setFields([{name:[s],value:t}]),c.onFinishScreen&&c.onFinishScreen(t)};return e.jsxs(p,{ref:l,layout:"vertical",validateMessages:O,initialValues:{dissolution:{approve:{dissolution_number:f().format("MM/YYYY[/QĐ]"),dissolution_date:f()}}},children:[e.jsx(p.Item,{name:"category",label:"Chọn loại hình doanh nghiệp",required:!0,className:E(F.current,{[F.active]:c.current===0}),children:e.jsx(C,{onChange:(r,t)=>n(r,t,"category"),placeholder:"Bấm vào đây",children:(h=c.data)==null?void 0:h.map(({_id:r,name:t,type:s})=>e.jsx(C.Option,{value:r,type:s,children:t},r))})}),e.jsx(U,{current:c.current,index:1,ref:l,data:i})]})});export{X as default};
